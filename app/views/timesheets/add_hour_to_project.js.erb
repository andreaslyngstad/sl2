if ($(".project_total_<%= j(@log.project.id.to_s)%>").length === 0){
	$(".project_hours").last().before('<%= j(render :partial => "timesheet_project_row", :locals => {:log => @log} )%>')
}
var input = $(".log_date_<%= j(@log.log_date.to_s)%>")
input.attr("data-logid",<%= j(@log.id.to_s)%> )
var firm_format = $(".current_firm_data").data("timeformat")
var field = $(".project_date_<%= j(@log.project.id.to_s)%>_<%= j(@log.log_date.to_s)%>")
var prehours_input = input.attr("data-prehours")
var total_project = $(".project_total_<%= j(@log.project.id.to_s)%>")
var prehours_total_project = total_project.attr("data-hours")
var prehours_total_date = $(".day_<%= j(@log.log_date.to_s) %>").attr("data-hours")
var prehours_total = $(".timesheet_week_total").attr("data-hours")
var prehours_log = field.attr("data-hours")
var posthours_total_project = parseFloat(prehours_total_project) - prehours_input + parseFloat(<%= j( @log.hours.to_s )%>)
var posthours_total_date = parseFloat(prehours_total_date) - prehours_input + parseFloat(<%= j( @log.hours.to_s )%>)
var posthours_total = parseFloat(prehours_total) - prehours_input + parseFloat(<%= j( @log.hours.to_s )%>)
var posthours = parseFloat(prehours_log) - prehours_input + parseFloat(<%= j( @log.hours.to_s )%>)

$(".day_<%= j(@log.log_date.to_s) %>").empty().append(secondsToString(posthours_total_date,firm_format))
$(".day_<%= j(@log.log_date.to_s) %>").attr("data-hours",posthours_total_date) 
total_project.empty().append(secondsToString(posthours_total_project,firm_format))
total_project.attr("data-hours",posthours_total_project)
$(".timesheet_week_total").empty().append(secondsToString(posthours_total,firm_format))
$(".timesheet_week_total").attr("data-hours",posthours_total)
input.attr("data-prehours", parseFloat(<%= j(@log.hours.to_s) %>))
field.empty().append(secondsToString(posthours,firm_format))
field.attr("data-hours", posthours)
$('.spinning').hide();