
<% if @klass %>
var object = "<%= escape_javascript(@klass.class.to_s.downcase) %>"
var id = "<%= escape_javascript(@klass.id.to_s) %>"
<% elsif @todo %>
var object = "<%= escape_javascript(@todo.class.to_s.downcase) %>"
var id = "<%= escape_javascript(@todo.id.to_s) %>"
<% end %>
$("#" + object + "_update_" + id + "_form").UIdialogs();
$("#" + object + "_update_" + id + "_form").children(".edit_" + object).validateWithErrors();
$("#" + object + "_update_" + id + "_form").find(".date").datepicker();
$("#" + object + "_update_" + id + "_form").dialog( "open" );
$("#" + object + "_update_" + id + "_form").find(".flash_notice").empty()

$("#" + object + "_update_" + id + "_form").prepend("<%= escape_javascript( render :partial => "shared/validation_error", :locals => { :object => @klass ? @klass : @todo })  %>");
$(".spinning").hide();
